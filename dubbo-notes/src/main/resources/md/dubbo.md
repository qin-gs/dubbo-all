### Dubbo



#### 简介

Apache Dubbo 是一款微服务开发框架，它提供了 RPC通信 与 微服务治理 两大关键能力。这意味着，使用 Dubbo 开发的微服务，将具备相互之间的远程发现与通信能力， 同时利用 Dubbo 提供的丰富服务治理能力，可以实现诸如服务发现、负载均衡、流量调度等服务治理诉求。

- 服务发现
- 流式通信
- 负载均衡
- 流量治理



#### 概念 架构

- 服务发现

  消费端自动发现服务地址列表的能力，借助于自动化的服务发现，微服务之间可以在无需感知对端部署位置与 IP 地址的情况下实现通信。

  Dubbo 提供的是一种 Client-Based 的服务发现机制，通常还需要部署额外的第三方注册中心组件来协调服务发现过程，如常用的 Nacos、Consul、Zookeeper 等

  <img src="./img/基本工作原理.png" alt="基本工作原理" style="zoom:50%;" />

  服务发现的一个核心组件是注册中心，Provider 注册地址到注册中心，Consumer 从注册中心读取和订阅 Provider 地址列表。 

- 协议

  协议是 RPC 的核心，它规范了数据在网络中的传输内容和格式。除必须的请求、响应数据外，通常还会包含额外控制数据，如单次请求的序列化方式、超时时间、压缩方式和鉴权信息等。

  - 数据交换格式：序列化方式
  - 协议结构：字段列表，字段语义，字段的排列方式
  - 协议通过定义规则，格式，语义来约定数据如何在网络中传输

  Triple

  dubbo2

- 流量管理

  流量管理的本质是将请求根据制定好的路由规则分发到应用服务上

- 配置

  - 启动阶段配置项：启动时读取的配置项，用于初始化各个组件，不会监听这些配置项的变化

  - 服务治理规则：服务治理规则主要作用是改变运行时服务的行为和选址逻辑，达到限流，权重配置等目的，包括覆盖规则、标签路由、条件路由。

  - 动态配置项：用于控制动态开关，Dubbo启动后监听动态配置项，当配置发生变化时，会自动进行相应的处理

- 部署架构

  - 注册中心

  - 配置中心

  - 元数据中心

    <img src="./img/Dubbo微服务组件与各个中心的交互过程.png" alt="Dubbo微服务组件与各个中心的交互过程" style="zoom: 67%;" />

- 扩展性

  在现有的架构或设计基础上，当未来某些方面发生变化的时候，我们能够以最小的改动来适应这种变化

  可扩展性的优点主要表现模块之间解耦，它符合开闭原则，对扩展开放，对修改关闭



#### 介绍与简介

- 路由规则
  - 动态路由
  - 权重路由
- 服务发现
- 动态配置



#### 高级操作

- 启动时检查
- 序列化协议安全
- 集群容错
- 负载均衡
- 线程模型